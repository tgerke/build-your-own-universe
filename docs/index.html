<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Build your own universe</title>
    <meta charset="utf-8" />
    <meta name="author" content="Travis Gerke" />
    <meta name="author" content="Garrick Aden-Buie" />
    <meta name="date" content="2020-08-28" />
    <link href="libs/moffitt-tachyons/tachyons.moffitt.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Serif:ital,wght@0,400;0,600;1,400;1,600&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"> 
    <link href="libs/animate.css/animate.min.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <script src="https://unpkg.com/leader-line@1.0.5/leader-line.min.js"></script>
    <link rel="stylesheet" href="css/moffitt-xaringan.css" type="text/css" />
    <link rel="stylesheet" href="css/moffitt-xaringan-extra.css" type="text/css" />
    <link rel="stylesheet" href="css/weepeople.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


name: title
class: left bottom hide-count








&lt;!-- Title Slide --&gt;

<div class="talk-meta">
<div class="talk-title">
<h1>Build your own universe</h1>
<p>Scale high-quality research data provisioning with R packages</p>
</div>
<div class="talk-author">
Travis Gerke &lt;br&gt; Garrick Aden-Buie
<br/>
<span>.small[.blue-medium[Moffitt Cancer Center]]</span>
</div>
<div class="talk-date">August 28, 2020</div>
</div>

&lt;svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="-5.00 -4.75 213.75 247.00" style="stroke: var(--blue);fill: var(--blue);position: absolute;width: 150px;height: 150px;bottom: 1em;right: 10px;"&gt;&lt;path d="M103.02.13l-.18-.13h-1.09l-.22.15a88.23 88.23 0 0 1-7.92 4.89C62.42 23.04 31.33 41.2.1 59.13c-.2 36.89 0 73.79-.1 110.68 0 2.88.06 5.76.1 8.64 29.69 17 59.26 34.3 88.91 51.43 4.26 2.6 8.59 4.58 12.51 7.68h1.14c3.87-2.61 8.05-4.88 12.09-7.24 29.75-17.3 59.77-34.48 89.43-51.88V59.05L115.9 7.92c-4.33-2.59-8.81-4.82-12.88-7.79zm88.49 170.41c-29.77 17.2-59.49 34.51-89.29 51.66q-44.59-25.92-89.24-51.72V67.09q41.11-23.92 82.31-47.71c2.28-1.33 4.58-2.75 6.94-3.89 3.32 1.59 6.47 3.62 9.67 5.44q39.81 23 79.6 46.09.11 51.77.01 103.52z" class="cls-1"/&gt;&lt;path d="M80.41 74.91a5.19 5.19 0 1 0-8.78 1.6 5.22 5.22 0 0 0 8.78-1.6z" class="cls-1"/&gt;&lt;path d="M75.94 81.5c2.69-.07 4-1.81 5.91-3.38-2.46.62-5.19 1.82-7.71 1.3-1.49-.19-3-.45-4.44-.7 2.04 1.44 3.52 3.03 6.24 2.78zm-3.16 6.72l5.53-.62c.07-1.63.12-3.27.18-4.9l-5.83-.07c.03 1.87.07 3.73.12 5.59zm11.31.72c-5.68 0-13.07-.17-17.77 3.47s-5.66 10.55-2.39 15.36c2 3.17 5 4.52 8.21 6.25-.07-2-.14-4-.23-5.94-2-2.12-4.41-3.66-4.18-6.92.19-4 4-5.42 7.41-6.07 3.77-.84 6.41 1.39 9.94 2.17 2.46.42 5.15-.19 7.61-.44-1.71-3.79-3.84-7.9-8.6-7.88zm2.77 4.25l-.65-.37v-.74l.64-.38.65.36v.75z" class="cls-1"/&gt;&lt;path d="M78.09 96.11q-2.53.32-5.07.6c.1 10.19.45 20.38.72 30.57 1.22-.61 2.44-1.2 3.67-1.8.15-9.79.51-19.57.68-29.37zm14.36 1.74c-.33 1.2 2.08 2.22 2.93 1.51.37-1.19-2.1-2.08-2.93-1.51zm-39.36 23.24a8.8 8.8 0 0 0 .31-13.72c-2.16-1.82-4.62-1.84-7.31-2-4.73-.08-9.47 0-14.2 0v30h6.52v-11.62c2.78.27 7.59-.72 9.74 1.34 1.1 3.17.87 7 1.29 10.3h7.5a39.71 39.71 0 0 1-1.51-9.81c.03-1.89-1.21-2.98-2.34-4.49zm-5.43-3c-2.94.67-6.19.39-9.2.41v-7.42c3 0 6.19-.27 9.12.38 2.79.92 2.97 5.69.11 6.6zm56.71-12.71h-9.45v30.08h6.25c.11-7.11-.14-14.24.21-21.34 1.62 7.11 3.16 14.24 4.75 21.36h6.55c1.61-6.94 2.95-14 4.82-20.81.29 6.94.1 13.86.15 20.81h6.24c.08-10 0-20 0-30.07h-9.39c-1.7 7.3-3.3 14.62-5 21.9-1.79-7.3-3.35-14.64-5.13-21.93zm60.82 28.9l1 1.2h5.63v-30l-6.29-.06q0 4.77.06 9.52c-4-3.41-10.1-3.24-13.14 1.27-3.2 5-3.29 13.17 1 17.62 3.35 3.26 7.99 2.83 11.74.45zm-5.91-15.7a3.86 3.86 0 0 1 4.71 1c2 2.23 2.13 7 .33 9.37a4 4 0 0 1-6.71-.22c-1.72-2.81-1.52-8.33 1.67-10.13z" class="cls-1"/&gt;&lt;path d="M78.99 111.59v5.18c1.6 2 4.05 3.37 2.59 6.29-2.8 4.42-9.94 5.21-13.62 9a6.61 6.61 0 0 0-1.44 8.31c1.38 2.32 4.09 3.21 6.35 4.47 0-1.18-.05-2.35-.09-3.53-1.24-1.57-4.38-3.06-2.73-5.4 3.64-4.11 10.63-4.69 14.41-9a8.5 8.5 0 0 0 .72-10.65c-1.53-2.39-3.82-3.3-6.19-4.67zm64.86 23.2c2.6-1.41 3.35-3.75 4.62-6.22a32.63 32.63 0 0 0-5.68.11c-2.22.6-3.7 3-6.18 2.08-2-.68-2.5-2.9-3.41-4.55 5.09-.11 10.17-.05 15.26-.06-.25-4.43-.19-8.36-3.86-11.46-4.37-3.47-12.92-2.91-15.62 2.52-2 3.62-2.21 8.52-1.1 12.45 1.89 6.18 10.81 8.14 15.97 5.13zm-6.54-16.87c2.91-.34 3.51 1.9 4.92 3.8-3 .12-5.95.13-8.94 0 1.02-1.26 2.08-3.96 4.02-3.8z" class="cls-1"/&gt;&lt;path d="M76.69 152.67c.23-6.74.39-13.51.38-20.27-1.21 1-3.08 1.22-3 3.06-.17 6.78.26 13.63.47 20.42 1.05-1 2.17-1.55 2.15-3.21z" class="cls-1"/&gt;&lt;path d="M78.01 143.39c.09 1.1.19 2.19.32 3.28 1.14 1.85 4.42 4 2.41 6.3-2.88 2.76-7.66 3.7-10.48 6.69a21.86 21.86 0 0 0-2 4.08 32.22 32.22 0 0 1 7-4.48c2.36-1.06 5.34-1.94 7.23-3.73a6.27 6.27 0 0 0 1-7.61c-1.19-1.99-3.66-3.28-5.48-4.53zm-1.53 16.2c-.62.41-1.23.82-1.83 1.25a46.57 46.57 0 0 0 .51 10.48c2.06-3.23 1.2-8.04 1.32-11.73z" class="cls-1"/&gt;&lt;/svg&gt;

&lt;style type="text/css"&gt;
#slide-title {
  background-image: url('figures/city-360.jpg');
  background-size: 100%;
  background-position: 0 -530px;
  background-repeat: repeat-y;
}
.talk-title {
  margin-bottom: 80px;
}

.talk-meta {
  left: 1em;
  width: 100%;
}

.talk-author {
  font-size: 1em;
}

.talk-date {
  font-size: 0.8em;
}

.blueprint1 {
  background-image: url('figures/star-trek-blueprint-1.jpg');
  background-size: cover;
}
.blueprint2 {
  background-image: url('figures/star-trek-blueprint-2.jpg');
  background-size: cover;
}

hr {
 box-sizing:content-box;
 height:3px;
 overflow:visible;
 border: none;
 background: var(--moffitt-gray);
}

.remark-container {
  background: white;
}
.remark-slide-scaler {
  box-shadow: none;
  -webkit-box-shadow: none;
  outline: 2px solid #eee;
}
&lt;/style&gt;

---



## How we do it

&lt;style type="text/css"&gt;
.people__row {
	width: 100%;
	display: grid;
	grid-template-columns: 1fr 4fr;
	grid-gap: 1em;
	align-items: center;
}
.people__row + .people__row {
  margin-top: 2em;
}
.people__groups {
  display: flex;
  justify-content: space-around;
}
.people__group .weepeople {
	font-size: 3em;
}
.people__group {
	text-align: center;
}
.people__label {
  color: #666;
  font-family: Overpass;
  line-height: 1;
}
.people__group__label {
	text-align: center;
}
.people__group__label &gt; * {
	margin-bottom: 0;
	margin-top: 0;
	margin-right: ;
}

/* fancy interactions */
.people__label {
  opacity: 0;
  transition: opacity 0.4s ease-in-out;
}

.people__group .weepeople {
  transition: all 0.4s ease-in-out;
  filter: drop-shadow(0 0 1px rgba(0,0,0,0.2));
}

.people__group:hover .people__label {
  overflow: ;
  opacity: 1;
}

.people__group:hover .weepeople {
  transform: scale(1.5);
  filter: drop-shadow(-5px 5px 2px rgba(0,0,0,0.15));
}

.people__row:hover .people__group__label {
  opacity: 1;
}

.people__group__label {
  opacity: 0.5;
  transition: opacity 0.25s;
}
&lt;/style&gt;



&lt;div class="people__row"&gt;
&lt;div class="people__group__label"&gt;
&lt;svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="laptop-code" .class="svg-inline--fa fa-laptop-code fa-w-20" role="img" viewBox="0 0 640 512" xmlns="http://www.w3.org/2000/svg" style="fill:currentColor;position:relative;display:inline-block;top:.1em;height:1.5em;"&gt;  &lt;path fill="currentColor" d="M255.03 261.65c6.25 6.25 16.38 6.25 22.63 0l11.31-11.31c6.25-6.25 6.25-16.38 0-22.63L253.25 192l35.71-35.72c6.25-6.25 6.25-16.38 0-22.63l-11.31-11.31c-6.25-6.25-16.38-6.25-22.63 0l-58.34 58.34c-6.25 6.25-6.25 16.38 0 22.63l58.35 58.34zm96.01-11.3l11.31 11.31c6.25 6.25 16.38 6.25 22.63 0l58.34-58.34c6.25-6.25 6.25-16.38 0-22.63l-58.34-58.34c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63L386.75 192l-35.71 35.72c-6.25 6.25-6.25 16.38 0 22.63zM624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;h4&gt;Data Science&lt;/h4&gt;
&lt;/div&gt;
&lt;div class="people__groups"&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople blue"&gt;A&lt;/div&gt;
&lt;div class="people__label"&gt;Data Quality Analyst&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople blue"&gt;bbb&lt;/div&gt;
&lt;div class="people__label"&gt;Data Analyst&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople blue"&gt;C&lt;/div&gt;
&lt;div class="people__label"&gt;Scientific Programmer&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople blue"&gt;eEe&lt;/div&gt;
&lt;div class="people__label"&gt;Spoke-Level Honest&amp;nbsp;Broker&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;div class="people__row"&gt;
&lt;div class="people__group__label"&gt;
&lt;svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="notes-medical" .class="svg-inline--fa fa-notes-medical fa-w-12" role="img" viewBox="0 0 384 512" xmlns="http://www.w3.org/2000/svg" style="fill:currentColor;position:relative;display:inline-block;top:.1em;height:1.5em;"&gt;  &lt;path fill="currentColor" d="M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM192 40c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm96 304c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8v48zm0-192c0 4.4-3.6 8-8 8H104c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;h4&gt;Abstraction&lt;/h4&gt;
&lt;/div&gt;
&lt;div class="people__groups"&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople red"&gt;uuu&lt;/div&gt;
&lt;div class="people__label"&gt;Database Abstractor&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople red"&gt;qqq&lt;/div&gt;
&lt;div class="people__label"&gt;Database Abstractor PRN&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div class="people__row"&gt;
&lt;div class="people__group__label"&gt;
&lt;svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tasks" .class="svg-inline--fa fa-tasks fa-w-16" role="img" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" style="fill:currentColor;position:relative;display:inline-block;top:.1em;height:1.5em;"&gt;  &lt;path fill="currentColor" d="M139.61 35.5a12 12 0 0 0-17 0L58.93 98.81l-22.7-22.12a12 12 0 0 0-17 0L3.53 92.41a12 12 0 0 0 0 17l47.59 47.4a12.78 12.78 0 0 0 17.61 0l15.59-15.62L156.52 69a12.09 12.09 0 0 0 .09-17zm0 159.19a12 12 0 0 0-17 0l-63.68 63.72-22.7-22.1a12 12 0 0 0-17 0L3.53 252a12 12 0 0 0 0 17L51 316.5a12.77 12.77 0 0 0 17.6 0l15.7-15.69 72.2-72.22a12 12 0 0 0 .09-16.9zM64 368c-26.49 0-48.59 21.5-48.59 48S37.53 464 64 464a48 48 0 0 0 0-96zm432 16H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H208a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;h4&gt;Management&lt;/h4&gt;
&lt;/div&gt;
&lt;div class="people__groups"&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;O&lt;/div&gt;
&lt;div class="people__label"&gt;Scientific Director&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;M&lt;/div&gt;
&lt;div class="people__label"&gt;Project Manager&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;s&lt;/div&gt;
&lt;div class="people__label"&gt;Regulatory Specialist&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;P&lt;/div&gt;
&lt;div class="people__label"&gt;Operations Supervisor&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;Q&lt;/div&gt;
&lt;div class="people__label"&gt;Core Facility Manager&lt;/div&gt;
&lt;/div&gt;
&lt;div class="people__group"&gt;
&lt;div class="weepeople green"&gt;i&lt;/div&gt;
&lt;div class="people__label"&gt;Staff Scientist&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

---



???

I'm going to start with an entirely hypothetical but familiar story...

---
class: center middle

&lt;style type="text/css"&gt;
.bubble p {
  position: relative;
  width: 300px;
  text-align: center;
  line-height: 1.4em;
  margin: 40px auto;
  background-color: #fff;
  border: 8px solid #333;
  border-radius: 30px;
  font-size: 1.25em;
}

.thought p {
  width: 500px;
  border-radius: 200px;
  padding: 30px;  
}

.bubble p:before,
.bubble p:after {
  content: ' ';
  position: absolute;
  width: 0;
  height: 0;
}

.speech p:before {
  left: 30px;
  bottom: -50px;
  border: 25px solid;
  border-color: #333 transparent transparent #333;
}

.speech p:after {
  left: 38px;
  bottom: -30px;
  border: 15px solid;
  border-color: #fff transparent transparent #fff;
}

.thought p:before,
.thought p:after {
  right: 10px;
  bottom: -30px;
  width: 40px;
  height: 40px;
  background-color: #fff;
  border: 8px solid #666;
  -webkit-border-radius: 28px;
  -moz-border-radius: 28px;
  border-radius: 28px;
}

.thought p:after {
  width: 20px;
  height: 20px;
  right: 5px;
  bottom: -40px;
  border-color: #999;
  -webkit-border-radius: 18px;
  -moz-border-radius: 18px;
  border-radius: 18px;
}

/* https://github.com/miniMAC/magic/blob/master/dist/magic.css */
.remark-visible .vanishIn {
  -webkit-animation-name: vanishIn;
          animation-name: vanishIn;
  -webkit-animation-duration: 2s;
          animation-duration: 2s;
  -webkit-animation-fill-mode: both;
          animation-fill-mode: both;
  
}

@-webkit-keyframes vanishIn {
  0% {
    opacity: 0;
    transform-origin: 50% 50%;
    transform: scale(2, 2);
    -webkit-filter: blur(90px);
            filter: blur(90px); }
  100% {
    opacity: 1;
    transform-origin: 50% 50%;
    transform: scale(1, 1);
    -webkit-filter: blur(0px);
            filter: blur(0px); } }

@keyframes vanishIn {
  0% {
    opacity: 0;
    transform-origin: 50% 50%;
    transform: scale(2, 2);
    -webkit-filter: blur(90px);
            filter: blur(90px); }
  100% {
    opacity: 1;
    transform-origin: 50% 50%;
    transform: scale(1, 1);
    -webkit-filter: blur(0px);
            filter: blur(0px); } }
&lt;/style&gt;

.center.w-50[
.bubble.thought.vanishIn[
How do I connect our .blue[tissue sample inventory] to a patient's .orange[clinical data]?
]

.tr.f6[
&amp;#x1F914;
]
]

???

It starts with a question.  
I want to connect our tissue sample inventory  
to patient clinical data.

It's not something I've done before,  
so I'm not quite sure how to access the samples table  
or how to link a sample to a patient  
but obviously it has to be possible.

So how do I get started?

---
class: no-border no-logo hide-count
background-image: url(figures/big-data-sensor-display.jpg)
background-size: cover
background-position: center right

???

If you believe the big data stock photos,  
I go to the self-service data wall  
and point at the numbers I want.

---

&lt;style type="text/css"&gt;
.remark-visible .css-typing p {
  opacity: 0;
  border-right: .15em solid orange;
  white-space: nowrap;
  overflow: hidden;
  -webkit-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
}

.remark-visible .css-typing p:nth-child(1) {
  width: 870px;
  -webkit-animation: type 3s steps(70, end);
  animation: type 3s steps(70, end);
  -webkit-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
}

.remark-visible .css-typing p:nth-child(2) {
  width: 390px;
  -webkit-animation: type 2s steps(31, end);
  animation: type 2s steps(31, end);
  -webkit-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
  -webkit-animation-delay: 4s;
  animation-delay: 4s;
}

.remark-visible .css-typing p:nth-child(3) {
  width: 110px;
  -webkit-animation: type 0.5s steps(7, end);
  animation: type 0.5s steps(7, end);
  -webkit-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
  -webkit-animation-delay: 7s;
  animation-delay: 7s;
}

.remark-visible .css-typing p:nth-child(4) {
  width: 100px;
  -webkit-animation: type 0.5s steps(7, end);
  animation: type 0.5s steps(7, end);
  -webkit-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
  -webkit-animation-delay: 7.5s;
  animation-delay: 7.5s;
}

@keyframes type {
  0% {
    width: 0;
  }
  1% {
    opacity: 1;
  }
  99.9% {
    border-right: .15em solid orange;
  }
  100% {
    opacity: 1;
    border: none;
  }
}

@-webkit-keyframes type {
  0% {
    width: 0;
  }
  1% {
    opacity: 1;
  }
  99.9% {
    border-right: .15em solid orange;
  }
  100% {
    opacity: 1;
    border: none;
  }
}

@keyframes blink {
  50% {
    border-color: transparent;
  }
}
@-webkit-keyframes blink {
  50% {
    border-color: tranparent;
  }
}
&lt;/style&gt;

.ba.b--gray-4.br2.pv2.ph3.mv5.shadow-4.animated.fadeIn[
.b[Aden-Buie, Garrick]&lt;br&gt;
Question about Sample Availability Table  

To: .gray-3[data-ops@acmemed.org]

***

.o-0[
How can I connect our sample inventory to patient-level clinical data?

I've heard you know the secret.

Thanks!

.gray-3[Garrick]
]
]

???

In reality, it probably starts with an email.
Or many emails.

I start by reaching out to someone I know who manages that particular data resource
to see what they can tell me...

---

.ba.b--gray-4.br2.pv2.ph3.mv5.shadow-4[
.b[Aden-Buie, Garrick]&lt;br&gt;
Question about Sample Availability Table  

To: .gray-3[data-ops@acmemed.org]

***

.css-typing[
How can I connect our sample inventory to patient-level clinical data?

I've heard you know the secret.

Thanks!

.gray-3[Garrick]
]
]


---

.w-90.ba.b--gray-4.br2.pv2.ph3.mv5.shadow-4.absolute.animated.lightSpeedOut[
.b[Aden-Buie, Garrick]&lt;br&gt;
Question about Sample Availability Table  

To: .gray-3[data-ops@acmemed.org]

***

How can I connect our sample inventory to patient-level clinical data?

I've heard you know the secret.

Thanks!

.gray-3[Garrick]
]


&lt;style type="text/css"&gt;
#email-attachment:hover {
  color: #eb1455
}
.zoomForward {
  animation: zoomForward 1s cubic-bezier(.45,-0.12,.51,.71);
  transform-origin: center;
}
@keyframes zoomForward {
  0% {
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(25);
  }
}
@-webkit-keyframes zoomForward {
  0% {
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(25);
  }
}
&lt;/style&gt;

&lt;script type="text/javascript"&gt;
(function() {
  btn = document.getElementById('email-attachment')
  btn.addEventListener('click', function(ev) {
    btn.classList.toggle('zoomForward')
    setTimeout(() =&gt; slideshow.gotoNextSlide(), 1000)
    setTimeout(() =&gt; btn.classList.remove('zoomForward'), 1500)
  })
})()
&lt;/script&gt;

.ba.b--gray-4.br2.pv2.ph3.mv5.shadow-4.relative.animated.bounceInDown.delay-2s[
.b[Friendly Data Ops Person]&lt;br&gt;
RE: Question about Sample Availability Table  
&lt;div class="w1 absolute right-2 gray-1" id="email-attachment"&gt;
&lt;svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="file-code" class="svg-inline--fa fa-file-code fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"&gt;&lt;path fill="currentColor" d="M149.9 349.1l-.2-.2-32.8-28.9 32.8-28.9c3.6-3.2 4-8.8.8-12.4l-.2-.2-17.4-18.6c-3.4-3.6-9-3.7-12.4-.4l-57.7 54.1c-3.7 3.5-3.7 9.4 0 12.8l57.7 54.1c1.6 1.5 3.8 2.4 6 2.4 2.4 0 4.8-1 6.4-2.8l17.4-18.6c3.3-3.5 3.1-9.1-.4-12.4zm220-251.2L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 51.9l76.1 76.1H256zM336 464H48V48h160v104c0 13.3 10.7 24 24 24h104zM209.6 214c-4.7-1.4-9.5 1.3-10.9 6L144 408.1c-1.4 4.7 1.3 9.6 6 10.9l24.4 7.1c4.7 1.4 9.6-1.4 10.9-6L240 231.9c1.4-4.7-1.3-9.6-6-10.9zm24.5 76.9l.2.2 32.8 28.9-32.8 28.9c-3.6 3.2-4 8.8-.8 12.4l.2.2 17.4 18.6c3.3 3.5 8.9 3.7 12.4.4l57.7-54.1c3.7-3.5 3.7-9.4 0-12.8l-57.7-54.1c-3.5-3.3-9.1-3.2-12.4.4l-17.4 18.6c-3.3 3.5-3.1 9.1.4 12.4z"&gt;&lt;/path&gt;&lt;/svg&gt;
&lt;/div&gt;

To: .gray-3[Aden-Buie, Garrick]


***
Hey Garrick,

Here's the query we use to populate the table.

Good Luck!

.gray-3[Data Ops]
]

???

I fire off the email and a little while later I get a reply.

_read email_

And look, the email came with an attachment that I can open up.

---

&lt;style type="text/css"&gt;
.code-two-column .remark-code {
  font-size: 0.33em;
  -webkit-column-count: 2;
  -moz-column-count: 2;
  column-count: 2;
  -webkit-column-gap: 20px;
  -moz-column-gap: 20px;
  column-gap: 20px;
}

.code-two-column pre {
  margin-top: 0;
  background-color: #FAFAFA;
  padding-left: 1em;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

.code-window-title-bar {
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
  padding-top: 10px;
}

.code-window-circle {
  width: 17px;
  height: 18px;
  margin-right: 6px;
}

.code-window-circles {
  position: absolute;
  left: 12px;
  top: 11px;
}
&lt;/style&gt;

.code-two-column.shadow-4.animated.zoomIn[
&lt;div class="code code-window-title-bar ph2 mb0 pv1 mt5 small bg-gray-4 gray-1 center relative"&gt;
sample-inventory-patient.sql
&lt;div class="code-window-circles"&gt;
  &lt;span class="code-window-circle bg-gray-3 br-100 dib"&gt;&lt;/span&gt;&lt;span class="code-window-circle bg-gray-3 br-100 dib"&gt;&lt;/span&gt;&lt;span class="code-window-circle bg-gray-3 br-100 dib"&gt;&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;


```sql
SELECT SA.PERSON_ID,SA.SAMPLE_ID,SA.SAMPLE_FAMILY_ID
,CH1.CHOICE_NAME AS COLLECTION_CONSORTIUM 
,CH2.CHOICE_NAME AS CELFILE_RELATED
,CH3.CHOICE_NAME AS FROZEN_TUMOR_TISSUE
,CH4.CHOICE_NAME AS FROZEN_NORMAL_TISSUE
,CH5.CHOICE_NAME AS WHOLE_BLOOD
,CH6.CHOICE_NAME AS BUFFY_COAT
,CH7.CHOICE_NAME AS DNA_FROM_BLOOD
,CH8.CHOICE_NAME AS PLASMA
,CH9.CHOICE_NAME AS SERUM
,CH10.CHOICE_NAME AS PARAFFIN
,CH11.CHOICE_NAME AS URINE
,CH12.CHOICE_NAME AS RNA
,CH13.CHOICE_NAME AS MNC
,CH14.CHOICE_NAME AS DNA_FROM_SOLID
,CH15.CHOICE_NAME AS ADJACENT_NORMAL
,CH16.CHOICE_NAME AS LCS_PROTOCOL_BLOOD_AVA
,CH17.CHOICE_NAME AS SOO_CATEGORY
,CH36.CHOICE_NAME AS SOO_TISSUETYPE
,CH19.CHOICE_NAME AS HISTOLOGYCAP
,CH20.CHOICE_NAME AS PRIMARY_METASTATIC
,PI.MEDICAL_ID
,PI.PARTNER_ID
,CH21.Anatomic_Site AS SOO_ANATOMICSITE
,CH22.CHOICE_NAME AS GROSS_DIAGNOSIS
,CH23.CHOICE_NAME AS PRIMARY_SITE_PATIENT
,CH24.CHOICE_NAME AS HISTOLOGY_PATIENT
,CH25.CHOICE_NAME AS DERIVED_CATEGORY
,CH27.CHOICE_NAME AS DERIVED_TISSUETYPE
,SA.DERIVED_ANATOMIC_SITE AS DERIVED_ANATOMICSITE
,CH29.TISSUE_TYPE AS COL_SITE_TISSUE_TYPE
,SA.SPECIMEN_COLLECTION_DATE
,CH29.ANATOMIC_SITE AS COL_SITE_ANATOMIC
,CH30.CHOICE_NAME AS COL_SITE_CATEGORY
,SA.BIOBANKING_SUBJECT_ID AS SUBJECT_ID
,CH31.CHOICE_NAME AS WHOLE_EXOME
,CH32.CHOICE_NAME AS TARGET_EXOME
,CH33.CHOICE_NAME AS SAMPLE_TYPE
,SA.CURRENT_QUANTITY
,CH34.CHOICE_NAME AS PATH_DIAGNOSIS_PQC
,SA.SAMPLE_TO_CANR_CHAR_LINK
,CH35.CHOICE_NAME AS PROTOCOL
FROM ABC.SAMPLE SA
LEFT JOIN ABC.CHOICE CH1 ON SA.COLLECTION_FACILITY = CH1.CHOICE_ID
LEFT JOIN ABC.CHOICE CH2 ON SA.CELFILE_RELATED = CH2.CHOICE_ID
LEFT JOIN ABC.PATIENT_INFO PI ON SA.PERSON_ID = PI.PERSON_ID
LEFT JOIN ABC.SAMPLE_INDICATOR SI ON SA.SAMPLE_KEY = SI.SAMPLE_KEY
LEFT JOIN ABC.CHOICE CH3 ON SI.FROZ_TTISE_AVL_FOR_RIND = CH3.CHOICE_ID
LEFT JOIN ABC.CHOICE CH4 ON SI.FROZ_NORM_TISS_AVL_FOR_RIND = CH4.CHOICE_ID
LEFT JOIN ABC.CHOICE CH5 ON SI.WHLBAVLFDNAEXTNDR_INCL_PAXDNAS = CH5.CHOICE_ID
LEFT JOIN ABC.CHOICE CH6 ON SI.BUFY_COAT_AVL_FOR_RIND = CH6.CHOICE_ID
LEFT JOIN ABC.CHOICE CH7 ON SI.DNAEXTRF_BLOD_AVL_FOR_RIND = CH7.CHOICE_ID
LEFT JOIN ABC.CHOICE CH8 ON SI.PLA_AVL_FOR_RIND = CH8.CHOICE_ID
LEFT JOIN ABC.CHOICE CH9 ON SI.SER_AVL_FOR_RIND = CH9.CHOICE_ID
LEFT JOIN ABC.CHOICE CH10 ON SI.PARAF_BLK_AVL_FOR_RIND = CH10.CHOICE_ID
LEFT JOIN ABC.CHOICE CH11 ON SI.UNINE_AVL_FOR_RIND = CH11.CHOICE_ID
LEFT JOIN ABC.CHOICE CH12 ON SI.RNAEXTRF_SOLID_TTISE_FOR_RIND = CH12.CHOICE_ID
LEFT JOIN ABC.CHOICE CH13 ON SI.MONO_CELS_EXTR_FOR_RIND = CH13.CHOICE_ID
LEFT JOIN ABC.CHOICE CH14 ON SI.DNAEXTRF_SOLID_TTISE_FOR_RIND = CH14.CHOICE_ID
LEFT JOIN ABC.CHOICE CH15 ON SI.ADJA_NSLD_SAMPLE_AVL_INDR = CH15.CHOICE_ID
LEFT JOIN ABC.CHOICE CH16 ON SI.LCS_PROTC_BLOD_AVL_FOR_RIND = CH16.CHOICE_ID
LEFT JOIN ABC.CHOICE CH17 ON SA.DERIVED_SOO_CATEGORY = CH17.CHOICE_ID
LEFT JOIN ABC.CHOICE CH18 ON SA.DERIVED_SOO_TISSUE_TYPE = CH18.CHOICE_ID
LEFT JOIN ABC.CHOICE CH19 ON SA.HISTOLOGY_TYPE_CONFORMED_CAP = CH19.CHOICE_ID
LEFT JOIN ABC.CHOICE CH20 ON SA.DERIVED_PRIMARY_VS_METASTATIC = CH20.CHOICE_ID
LEFT JOIN ABC.TISSUE_TYPE CH21 
  ON SUBSTR(SA.DERIVED_SOO_ANATOMIC_SITE,0,8) = CH21.TISSUE_TYPE_KEY
LEFT JOIN ABC.CHOICE CH22 ON SA.DERIVED_GROSS_DIAGNOSIS = CH22.CHOICE_ID
LEFT JOIN ABC.CHOICE CH23 ON SA.PRIMARY_SITE_PATIENT = CH23.CHOICE_ID
LEFT JOIN ABC.CHOICE CH24 ON SA.HISTOLOGY_PATIENT = CH24.CHOICE_ID
LEFT JOIN ABC.CHOICE CH25 ON SA.DERIVED_CATEGORY = CH25.CHOICE_ID
LEFT JOIN ABC.CHOICE CH26 ON SA.DERIVED_TISSUE_TYPE = CH26.CHOICE_ID
LEFT JOIN ABC.CHOICE CH27 ON SA.DERIVED_TISSUE_TYPE = CH27.CHOICE_ID
LEFT JOIN ABC.CHOICE CH28 ON SA.COLLECTION_SITE_TISSUE_TYPE = CH28.CHOICE_ID
LEFT JOIN ABC.TISSUE_TYPE CH29 ON SA.COLLECTION_SITE_ANATOMIC = CH29.TISSUE_TYPE_KEY
LEFT JOIN ABC.CHOICE CH30 ON SA.COLLECTION_SITE_CATEGORY = CH30.CHOICE_ID
LEFT JOIN ABC.CHOICE CH31 ON SI.WHL_EXOM_SEQ_AVL_INDR = CH31.CHOICE_ID
LEFT JOIN ABC.CHOICE CH32 ON SI.TAR_EXOM_SEQ_AVL_INDR = CH32.CHOICE_ID
LEFT JOIN ABC.CHOICE CH33 ON SA.SAMPLE_TYPE = CH33.CHOICE_ID
LEFT JOIN ABC.CHOICE CH34 ON SA.PATH_DIAGNOSIS_PQC = CH34.CHOICE_ID
LEFT JOIN ABC.CHOICE CH35 ON SA.PROTOCOL = CH35.CHOICE_ID
LEFT JOIN ABC.CHOICE CH36 ON SA.DERIVED_SOO_TISSUE_TYPE = CH36.CHOICE_ID
WHERE SA.ISDELETED = 0
```
]

???

And I'm immediately hit with a wall of sequel.

This query doesn't look pretty but in a couple hours I'll probably get the gist of it...

And hey, it's at least code, right?

Well... since we're emailing files around, sometimes you'll get a query like this
in a slightly different format...

---
class: no-logo no-border hide-count word-doc animated-slide slideInRight boingOutDown

&lt;style type="text/css"&gt;
.word-doc {
  background-image: url('figures/word-doc.png');
  background-size: cover;
  overflow: hidden;
  height: 100%;
  padding-top: 5em;
}

.word-doc pre {
  max-height: 66%;
  overflow: hidden;
  position: absolute;
  width: 90%;
}

.word-doc pre code.sql {
  background: white;
  font-family: sans-serif;
  max-width: 100%;
  overflow-x: hidden;
}

#sql-font-size-down {
  background: transparent;
  width: 35px;
  height: 30px;
  position: absolute;
  top: 77px;
  left: 404px;
  border: none;
  cursor: pointer;
}
#sql-font-size-up {
  background: transparent;
  width: 35px;
  height: 30px;
  position: absolute;
  top: 77px;
  left: 365px;
  border: none;
  cursor: pointer;
}
#sql-font-comic-sans {
  background: transparent;
  text-align: center;
  width: 125px;
  height: 30px;
  padding: 0;
  position: absolute;
  top: 77px;
  left: 138px;
  border: none;
  cursor: pointer;
  font-size: 21px;
}

/* magic.css https://github.com/miniMAC/magic/blob/master/dist/magic.css */
.remark-fading .boingOutDown {
  -webkit-animation-name: boingOutDown;
  animation-name: boingOutDown;
}

@-webkit-keyframes boingOutDown {
  0% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(0deg); }
  20% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(10deg); }
  30% {
    opacity: 1;
    transform-origin: 0% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(0deg); }
  40% {
    opacity: 1;
    transform-origin: 0% 100%;
    transform: perspective(800px) rotateX(10deg) rotateY(10deg); }
  100% {
    opacity: 0;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(90deg) rotateY(0deg); } }

@keyframes boingOutDown {
  0% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(0deg); }
  20% {
    opacity: 1;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(10deg); }
  30% {
    opacity: 1;
    transform-origin: 0% 100%;
    transform: perspective(800px) rotateX(0deg) rotateY(0deg); }
  40% {
    opacity: 1;
    transform-origin: 0% 100%;
    transform: perspective(800px) rotateX(10deg) rotateY(10deg); }
  100% {
    opacity: 0;
    transform-origin: 100% 100%;
    transform: perspective(800px) rotateX(90deg) rotateY(0deg); } }
&lt;/style&gt;

&lt;button id="sql-font-comic-sans" type="button"&gt;&lt;/button&gt;
&lt;button id="sql-font-size-up" type="button"&gt;&lt;/button&gt;
&lt;button id="sql-font-size-down" type="button"&gt;&lt;/button&gt;


```sql
SELECT SA.PERSON_ID,SA.SAMPLE_ID,SA.SAMPLE_FAMILY_ID
,CH1.CHOICE_NAME AS COLLECTION_CONSORTIUM 
,CH2.CHOICE_NAME AS CELFILE_RELATED
,CH3.CHOICE_NAME AS FROZEN_TUMOR_TISSUE
,CH4.CHOICE_NAME AS FROZEN_NORMAL_TISSUE
,CH5.CHOICE_NAME AS WHOLE_BLOOD
,CH6.CHOICE_NAME AS BUFFY_COAT
,CH7.CHOICE_NAME AS DNA_FROM_BLOOD
,CH8.CHOICE_NAME AS PLASMA
,CH9.CHOICE_NAME AS SERUM
,CH10.CHOICE_NAME AS PARAFFIN
,CH11.CHOICE_NAME AS URINE
,CH12.CHOICE_NAME AS RNA
,CH13.CHOICE_NAME AS MNC
,CH14.CHOICE_NAME AS DNA_FROM_SOLID
,CH15.CHOICE_NAME AS ADJACENT_NORMAL
,CH16.CHOICE_NAME AS LCS_PROTOCOL_BLOOD_AVA
,CH17.CHOICE_NAME AS SOO_CATEGORY
,CH36.CHOICE_NAME AS SOO_TISSUETYPE
,CH19.CHOICE_NAME AS HISTOLOGYCAP
,CH20.CHOICE_NAME AS PRIMARY_METASTATIC
,PI.MEDICAL_ID
,PI.PARTNER_ID
,CH21.Anatomic_Site AS SOO_ANATOMICSITE
,CH22.CHOICE_NAME AS GROSS_DIAGNOSIS
,CH23.CHOICE_NAME AS PRIMARY_SITE_PATIENT
,CH24.CHOICE_NAME AS HISTOLOGY_PATIENT
,CH25.CHOICE_NAME AS DERIVED_CATEGORY
,CH27.CHOICE_NAME AS DERIVED_TISSUETYPE
,SA.DERIVED_ANATOMIC_SITE AS DERIVED_ANATOMICSITE
,CH29.TISSUE_TYPE AS COL_SITE_TISSUE_TYPE
,SA.SPECIMEN_COLLECTION_DATE
,CH29.ANATOMIC_SITE AS COL_SITE_ANATOMIC
,CH30.CHOICE_NAME AS COL_SITE_CATEGORY
,SA.BIOBANKING_SUBJECT_ID AS SUBJECT_ID
,CH31.CHOICE_NAME AS WHOLE_EXOME
,CH32.CHOICE_NAME AS TARGET_EXOME
,CH33.CHOICE_NAME AS SAMPLE_TYPE
,SA.CURRENT_QUANTITY
,CH34.CHOICE_NAME AS PATH_DIAGNOSIS_PQC
,SA.SAMPLE_TO_CANR_CHAR_LINK
,CH35.CHOICE_NAME AS PROTOCOL
FROM ABC.SAMPLE SA
LEFT JOIN ABC.CHOICE CH1 ON SA.COLLECTION_FACILITY = CH1.CHOICE_ID
LEFT JOIN ABC.CHOICE CH2 ON SA.CELFILE_RELATED = CH2.CHOICE_ID
LEFT JOIN ABC.PATIENT_INFO PI ON SA.PERSON_ID = PI.PERSON_ID
LEFT JOIN ABC.SAMPLE_INDICATOR SI ON SA.SAMPLE_KEY = SI.SAMPLE_KEY
LEFT JOIN ABC.CHOICE CH3 ON SI.FROZ_TTISE_AVL_FOR_RIND = CH3.CHOICE_ID
LEFT JOIN ABC.CHOICE CH4 ON SI.FROZ_NORM_TISS_AVL_FOR_RIND = CH4.CHOICE_ID
LEFT JOIN ABC.CHOICE CH5 ON SI.WHLBAVLFDNAEXTNDR_INCL_PAXDNAS = CH5.CHOICE_ID
LEFT JOIN ABC.CHOICE CH6 ON SI.BUFY_COAT_AVL_FOR_RIND = CH6.CHOICE_ID
LEFT JOIN ABC.CHOICE CH7 ON SI.DNAEXTRF_BLOD_AVL_FOR_RIND = CH7.CHOICE_ID
LEFT JOIN ABC.CHOICE CH8 ON SI.PLA_AVL_FOR_RIND = CH8.CHOICE_ID
LEFT JOIN ABC.CHOICE CH9 ON SI.SER_AVL_FOR_RIND = CH9.CHOICE_ID
LEFT JOIN ABC.CHOICE CH10 ON SI.PARAF_BLK_AVL_FOR_RIND = CH10.CHOICE_ID
LEFT JOIN ABC.CHOICE CH11 ON SI.UNINE_AVL_FOR_RIND = CH11.CHOICE_ID
LEFT JOIN ABC.CHOICE CH12 ON SI.RNAEXTRF_SOLID_TTISE_FOR_RIND = CH12.CHOICE_ID
LEFT JOIN ABC.CHOICE CH13 ON SI.MONO_CELS_EXTR_FOR_RIND = CH13.CHOICE_ID
LEFT JOIN ABC.CHOICE CH14 ON SI.DNAEXTRF_SOLID_TTISE_FOR_RIND = CH14.CHOICE_ID
LEFT JOIN ABC.CHOICE CH15 ON SI.ADJA_NSLD_SAMPLE_AVL_INDR = CH15.CHOICE_ID
LEFT JOIN ABC.CHOICE CH16 ON SI.LCS_PROTC_BLOD_AVL_FOR_RIND = CH16.CHOICE_ID
LEFT JOIN ABC.CHOICE CH17 ON SA.DERIVED_SOO_CATEGORY = CH17.CHOICE_ID
LEFT JOIN ABC.CHOICE CH18 ON SA.DERIVED_SOO_TISSUE_TYPE = CH18.CHOICE_ID
LEFT JOIN ABC.CHOICE CH19 ON SA.HISTOLOGY_TYPE_CONFORMED_CAP = CH19.CHOICE_ID
LEFT JOIN ABC.CHOICE CH20 ON SA.DERIVED_PRIMARY_VS_METASTATIC = CH20.CHOICE_ID
LEFT JOIN ABC.TISSUE_TYPE CH21 
  ON SUBSTR(SA.DERIVED_SOO_ANATOMIC_SITE,0,8) = CH21.TISSUE_TYPE_KEY
LEFT JOIN ABC.CHOICE CH22 ON SA.DERIVED_GROSS_DIAGNOSIS = CH22.CHOICE_ID
LEFT JOIN ABC.CHOICE CH23 ON SA.PRIMARY_SITE_PATIENT = CH23.CHOICE_ID
LEFT JOIN ABC.CHOICE CH24 ON SA.HISTOLOGY_PATIENT = CH24.CHOICE_ID
LEFT JOIN ABC.CHOICE CH25 ON SA.DERIVED_CATEGORY = CH25.CHOICE_ID
LEFT JOIN ABC.CHOICE CH26 ON SA.DERIVED_TISSUE_TYPE = CH26.CHOICE_ID
LEFT JOIN ABC.CHOICE CH27 ON SA.DERIVED_TISSUE_TYPE = CH27.CHOICE_ID
LEFT JOIN ABC.CHOICE CH28 ON SA.COLLECTION_SITE_TISSUE_TYPE = CH28.CHOICE_ID
LEFT JOIN ABC.TISSUE_TYPE CH29 ON SA.COLLECTION_SITE_ANATOMIC = CH29.TISSUE_TYPE_KEY
LEFT JOIN ABC.CHOICE CH30 ON SA.COLLECTION_SITE_CATEGORY = CH30.CHOICE_ID
LEFT JOIN ABC.CHOICE CH31 ON SI.WHL_EXOM_SEQ_AVL_INDR = CH31.CHOICE_ID
LEFT JOIN ABC.CHOICE CH32 ON SI.TAR_EXOM_SEQ_AVL_INDR = CH32.CHOICE_ID
LEFT JOIN ABC.CHOICE CH33 ON SA.SAMPLE_TYPE = CH33.CHOICE_ID
LEFT JOIN ABC.CHOICE CH34 ON SA.PATH_DIAGNOSIS_PQC = CH34.CHOICE_ID
LEFT JOIN ABC.CHOICE CH35 ON SA.PROTOCOL = CH35.CHOICE_ID
LEFT JOIN ABC.CHOICE CH36 ON SA.DERIVED_SOO_TISSUE_TYPE = CH36.CHOICE_ID
WHERE SA.ISDELETED = 0
```

&lt;script type="text/javascript"&gt;
(function() {
  const btnDown = document.getElementById('sql-font-size-down')
  const btnUp = document.getElementById('sql-font-size-up')
  const btnFont = document.getElementById('sql-font-comic-sans')
  const code = document.querySelector('.word-doc pre code')
  let size = 100
  code.style.fontSize = size + '%'
  btnDown.addEventListener('click', function() {
    if (size &lt;= 10) return;
    size = size - 10
    code.style.fontSize = size + '%'
  })
  btnUp.addEventListener('click', function() {
    if (size &gt;= 100) return;
    size = size + 10
    code.style.fontSize = size + '%'
  })
  btnFont.addEventListener('click', function(ev) {
    if (btnFont.innerText === '') {
      btnFont.innerText = 'Comic Sans'
      code.style.fontFamily = '"Comic Sans MS", cursive, sans-serif'
    } else {
      btnFont.innerText = ''
      code.style.fontFamily = 'sans-serif'
    }
  })
})()
&lt;/script&gt;

???

Like a word document!

Where the query doesn't really fit on screen or a page...

and formatting choices are... fluid

---
class: middle animated fadeIn delay-1s

.f6.b[SQL is .red[robot logic] &amp;#x1F916;]

![](figures/apress-select-sqlite.jpg)

.footnote.tr[
[_Definitive Guide to SQLite_](https://www.apress.com/gp/book/9781430232254)
]

???

Putting aside the emailing and the word document format,
SQL queries aren't a great vehicle for knowledge transfer

They're good for precisely communicating data specifications
in the robot logic databases understand

but we have other ways of working with data
that have been specifically designed with humans in mind

---

class: middle

&lt;style type="text/css"&gt;
.focus-ul {
  background-image: linear-gradient(90deg, #eb1455, #eb1455);
  background-size: 0 100%;
  background-repeat: no-repeat;
  transition: background-size 0.25s ease-in, color 0.5s ease-in;
}

.focus-ul:focus {
  outline: none;
  color: #FFF;
  background-size: 100% 100%;
}
&lt;/style&gt;

.f6.b[.code[dplyr] is .green[human logic] &amp;#x1F917;]

&lt;blockquote class = "ml0 lh-copy"&gt;
&lt;span style="font-size:1.6em"&gt;Programs must be &lt;span class="focus-ul" tabindex="1"&gt;written for people to read&lt;/span&gt;, and only &lt;span class="focus-ul" tabindex="1"&gt;incidentally for machines&lt;/span&gt; to execute.&lt;/span&gt;

&lt;br&gt;&lt;br&gt;&lt;cite&gt;Harold Abelson, Structure and Interpretation of Computer Programs&lt;/cite&gt;
&lt;/blockquote&gt;

???

for example, dplyr

whose API is very intentionally designed  
in line with the philopsophy that code is  
written for people to read  
and only incidentally for machines to execute

Which reminds me of a great quote from Jenny Bryan...

---
class: middle

&lt;div class="f4 blue lh-copy"&gt;
Of course someone&lt;br&gt;
has to write for loops.&lt;br&gt;
It doesn't have to be you.
&lt;/div&gt;

&lt;div class="f6 red lh-copy"&gt;— Jenny Bryan&lt;/div&gt;

---
class: middle animated-slide fadeIn

&lt;style type="text/css"&gt;
del {
  text-decoration-color: #eb1455;
  text-decoration-thickness: 10px;
}
&lt;/style&gt;

&lt;div class="f4 blue lh-copy"&gt;
Of course someone&lt;br&gt;
has to write &lt;del&gt;for loops&lt;/del&gt;.&lt;br&gt;
It doesn't have to be you.
&lt;/div&gt;

&lt;div class="absolute red f1" style="top: 160px;right: 340px;transform: rotate(-36deg);"&gt;↝&lt;/div&gt;
&lt;div class="absolute f3 red" style="top: 130px;right: 170px;transform: rotate(-7deg);"&gt;SQL&lt;/div&gt;

&lt;div class="f6 red lh-copy"&gt;— Garrick Aden-Buie&lt;/div&gt;

???

Let's take a look at what this query might look like  
in an alternate universe...

---
layout: true
class: animated-slide fadeIn

---

.remark-code.code-example.pa2[
.purple[library](moffittverse)&lt;br&gt;&lt;br&gt;
use_backend(.green["abc"])&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl(.green["sample_inventory"])&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl(.green["patient"])&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl(.green["sample_indicators"])&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;.green["SAMPLE_ID"])&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;.green["PERSON_ID"])&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

???

Here's the same query,  
rewritten using a blend of `dplyr`  
and custom functions that support our particular setup

---


.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

???

We call our universe _moffittverse_.

Very much inspired by the _tidyverse_,  
where a single `library(moffittverse)`  
loads a common set of packages  
that we use for nearly every data request.

---

&lt;style type="text/css"&gt;
.code-example {
  position: absolute;
  top: 100px;
}
.leader-line {
  z-index: 100;
}
[class^="leader-start"] {
  color: var(--orange);
  font-size: 1.1em;
  width: 450px;
  margin: 0;
  position: absolute;
  text-align: center;
}
.leader-start-1 {
  top: 10%;
  right: 30%;
}
.leader-start-2 {
  top: 15%;
  right: 20%;
}
&lt;/style&gt;

.remark-code.code-example.pa2.gray-4[
.leader-end-1.gray-1[library(moffittverse)]&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

&lt;div class="leader-start-1 animated-slide fadeIn"&gt;Our universe&lt;/div&gt;

&lt;script type="text/javascript"&gt;
function connectElements(i, startSocket = 'top', endSocket = 'auto') {
  let start = document.querySelector(`.remark-slides-area .leader-start-${i}`)
  let end = document.querySelector(`.remark-slides-area .leader-end-${i}`)
  start.line = new LeaderLine(start, end, {
    hide: !start.closest('.remark-slide-container').classList.contains('remark-visible')
  })
  start.line.setOptions({startSocket, endSocket})
  let lineEl = document.querySelector('body &gt; svg.leader-line')
  let slide = start.closest('.remark-slides-area')
  slide.appendChild(lineEl)
  return start.line
}

connectElements(1, 'bottom')

slideshow.on('hideSlide', function(slide) {
  let idx = slide.getSlideIndex()
  slides = document.querySelectorAll('.remark-slides-area .remark-slide-container')
  let thisSlide = slides[idx]
  let lineLeaders = thisSlide.querySelectorAll('[class^="leader-start"]')
  if (lineLeaders.length) {
    lineLeaders.forEach(el =&gt; el.line.hide('none'))
  }
})

slideshow.on('afterShowSlide', function(slide) {
  let idx = slide.getSlideIndex()
  slides = document.querySelectorAll('.remark-slides-area .remark-slide-container')
  let thisSlide = slides[idx]
  let lineLeaders = thisSlide.querySelectorAll('[class^="leader-start"]')
  if (lineLeaders.length) {
    lineLeaders.forEach(function(el) {
      el.line.position()
      el.line.show('draw')
    })
  }
})

window.addEventListener('resize', function() {
  document
    .querySelectorAll('.remark-slides-area [class^="leader-start"]')
    .forEach(el =&gt; el.line.position())
});
&lt;/script&gt;

???

Most of the packages are from the tidyverse,

but we also include our own supporting package: `moffittCDS`  
specifically tailored to my team's workflow.

---

&lt;style type="text/css"&gt;
.expand-in, .remark-fading .expand-in {
  max-height: 0; 
  overflow: hidden; 
  transition: max-height 0.5s linear; 
  -webkit-transition: max-height 0.5s linear;
}
.remark-visible .expand-in { max-height: 600px; }
&lt;/style&gt;

.remark-code.code-example.pa2.gray-4[
.gray-1[library(moffittverse)]&lt;br&gt;
.expand-in.h-250px.gray-1.bg-gray-8.ph3.pv1[
── .b[Attaching packages] ──────── moffittverse 0.0.1 ──&lt;br&gt;
.green[✓] tibble&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 3.0.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] purrr&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.3.4&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;
.green[✓] tidyr&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1.1.0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] dplyr&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1.0.0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;
.green[✓] fs&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.5.0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] stringr&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1.4.0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;
.green[✓] glue&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.4.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] forcats&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;0.5.0&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;
.green[✓] readr&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;1.3.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] lubridate&amp;nbsp;&amp;nbsp;1.7.9&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &lt;br&gt;
.green[✓] readxl&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1.3.1&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;.green[✓] moffittCDS 0.1.0
]&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

???

This creates a common starting point  
for everyone on the team.

It also gives us a formal "on ramp"  
to install and set up database dependencies
that we can leverage in specific packages  
to interface with the many back-end systems  
used throughout the cancer and research institutes

---

.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
.leader-end-2.gray-1[use_backend("abc")]&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

&lt;div class="leader-start-2 animated-slide fadeIn"&gt;Standardized,&lt;br&gt; managed connections&lt;/div&gt;

&lt;script type="text/javascript"&gt;
connectElements(2, 'bottom')
&lt;/script&gt;

???

This makes connecting to a specific system straightforward...

use backend...

---

.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
.gray-1[use_backend("abc")]&lt;br&gt;
.expand-in.h-150px.gray-1.bg-gray-8.ph3[
.purple[library](DBI)&lt;br&gt;
.purple[library](dbplyr)&lt;br&gt;
.b[.purple[library](moffittABC)]&lt;br&gt;
con &lt;- dbConnect(odbc::odbc(), uid = .green["fiddly"], pwd = .green["details"], ...)
]&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

???

behind the scenes `use_backend()` loads  
additional packages for connecting with databases  
as well as a back-end specific package,  
`moffittABC`

Each backend package has two primary goals,  
the first is to simplify access.

So by default, moffittABC will manage  
connections to the ABC database

---

&lt;style type="text/css"&gt;
.leader-start-3 {
  top: 20%;
  right: 10%;
}
.reveal-focus {
  position: relative;
  cursor: pointer;
}
.reveal-focus:focus {
  outline: none;
}
.reveal-focus .reveal-shown {
  transition: opacity 150ms linear;
}
.reveal-focus .reveal-other {
  position: absolute;
  transition: opacity 150ms linear;
  width: 1000px;
  left: 0;
}
.reveal-focus:not(:focus) .reveal-other {
  opacity: 0;
}
.reveal-focus:focus .reveal-shown {
  opacity: 0;
}
&lt;/style&gt;

.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
.leader-end-3.gray-1[.onClickStyle.red.bg-red-8[samples]&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;&lt;span class = "reveal-focus" tabindex="1"&gt;&lt;span class="reveal-shown"&gt;abc_tbl("sample_inventory")&lt;/span&gt;&lt;span class="reveal-other"&gt;tbl(con, dbplyr::in_schema("ABC", "SAMPLE_INVENTORY"))&lt;/span&gt;]&lt;br&gt;
.gray-1[.onClickStyle.purple.bg-purple-8[patients]&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")]&lt;br&gt;
.gray-1[.onClickStyle.yellow-1.bg-yellow-8[sample_ind]&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")]&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

&lt;div class="leader-start-3 animated-slide fadeIn"&gt;Easy schema/table access&lt;/div&gt;

&lt;script type="text/javascript"&gt;
connectElements(3, 'bottom', 'top');

(function() {
  let styleClickers = document.querySelectorAll('.remark-slides-area .onClickStyle')
  for (let styleClicker of styleClickers) {
    styleClicker.extraClasses = [...styleClicker.classList].filter(c =&gt; c !== 'onClickStyle')
    styleClicker.classList = 'onClickStyle'
    styleClicker.addEventListener('click', function(ev) {
      console.log(styleClicker)
      if (styleClicker.classList.length &gt; 1) {
        styleClicker.classList = 'onClickStyle'
      } else {
        styleClicker.classList = ['onClickStyle', ...styleClicker.extraClasses].join(' ')
      }
    })
  }
})()
&lt;/script&gt;

???

and it also provides easy access to tables.

Here we use the `abc_tbl()` function,  
to connect to table in the ABC schema  
using a global connection managed by the package  

to connect to the three tables we need

---

&lt;style type="text/css"&gt;
.leader-start-4 {
  top: 45%;
  right: 0;
}
&lt;/style&gt;

.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
.gray-1[.red.bg-red-8[samples]&amp;nbsp;%&amp;gt;%&amp;nbsp;]&lt;br&gt;
.leader-end-4.gray-1[&amp;nbsp;&amp;nbsp;left_join(.yellow-1.bg-yellow-8[sample_ind],&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;]&lt;br&gt;
.gray-1[&amp;nbsp;&amp;nbsp;left_join(.purple.bg-purple-8[patients],&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;]&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_choice_replace()&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;abc_not_deleted()
]

&lt;div class="leader-start-4 animated-slide fadeIn"&gt;&lt;span class="red"&gt;samples&lt;/span&gt; &lt;span class="orange"&gt;&amp;rarr;&lt;/span&gt; &lt;span class="purple"&gt;patients&lt;/span&gt;&lt;/div&gt;

&lt;script type="text/javascript"&gt;
connectElements(4, 'bottom')
&lt;/script&gt;

???

At this point we've set up our workspace environment,  
and connected to the database and tables we need  

... so we can now focus on  
how these tables relate to each other  
so we can link samples to patients

---

&lt;style type="text/css"&gt;
.leader-start-5 {
  bottom: 15%;
  right: 5%;
}
&lt;/style&gt;

.remark-code.code-example.pa2.gray-4[
library(moffittverse)&lt;br&gt;&lt;br&gt;
use_backend("abc")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_inventory")&lt;br&gt;
patients&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("patient")&lt;br&gt;
sample_ind&amp;nbsp;&amp;lt;-&amp;nbsp;abc_tbl("sample_indicators")&lt;br&gt;&lt;br&gt;
samples&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(sample_ind,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"SAMPLE_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
&amp;nbsp;&amp;nbsp;left_join(patients,&amp;nbsp;by&amp;nbsp;=&amp;nbsp;"PERSON_ID")&amp;nbsp;%&amp;gt;%&amp;nbsp;&lt;br&gt;
.gray-1[&amp;nbsp;&amp;nbsp;&lt;span class="focus-ul" tabindex="1"&gt;abc_choice_replace()&lt;/span&gt;&amp;nbsp;%&amp;gt;%&amp;nbsp;]&lt;br&gt;
.leader-end-5.gray-1[&amp;nbsp;&amp;nbsp;&lt;span class="focus-ul" tabindex="1"&gt;abc_not_deleted()&lt;/span&gt;]
]

&lt;div class="leader-start-5 animated-slide fadeIn"&gt;Common, tedious, or error prone&lt;/div&gt;

&lt;script type="text/javascript"&gt;
connectElements(5, 'left', 'bottom')
&lt;/script&gt;

???

The final lines speak to the second goal  
of the back-end specific packages  
which is to wrap common, tedious or error-prone  
data base moves into standard functions.

Here we can use the powerful metaprogramming tools of R  
to completely abstract what would otherwise be hundreds of lines of SQL, e.g:

- automatically look up text labels of coded values
- or apply a "not deleted" filter to all tables used in the query
  
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "atom-one-light",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
